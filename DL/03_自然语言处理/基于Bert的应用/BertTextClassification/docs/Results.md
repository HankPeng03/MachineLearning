# imdb results

## 0. 长度分析

|                      | 最小长度           | 平均长度              | 最大长度               |
| -------------------- | ------------------ | --------------------- | ---------------------- |
| imdb                 | train:11    dev: 5 | train: 272   dev: 266 | train: 2789   dev:2640 |
| ag_news              | train: 3  dev:6    | train:36  dev: 35     | train:212   dev: 153   |
| sst_2                | train:1 dev: 2     | train:9  dev: 20      | train: 53   dev: 49    |
| dbpedia              | train: 2 dev: 3    | train:53 dev:53       | train:1499  dev:547    |
| yelp_review_full     | train: 1  dev: 1   | train: 156 dev: 157   | train: 1290 dev: 1196  |
| yelp_review_polarity | train: 1  dev: 1   | train: 155  dev: 154  | train:1202  dev: 1290  |
| THUCNews             | train: 8 dev: 15   | train: 794  dev: 876  | train: 26660 dev: 9128 |
| yahoo_answers        | train:2  dev: 1    | train: 36 dev: 36     | train: 885  dev: 2191  |
|                      |                    |                       |                        |

### 1. imdb

|       | 50    | 100  | 150   | 200   | 250   | 300   | 350   | 400  | 450  | 500  | 500+ |
| ----- | ----- | ---- | ----- | ----- | ----- | ----- | ----- | ---- | ---- | ---- | ---- |
| dev   | 1.09% | 9.4% | 27.1% | 49.6% | 63.2% | 72.0% | 75.3% | 82.9 | 86.4 | 89.1 | 1    |
| train | 0.9%  | 8.8% | 26.2% | 48.9% | 62.1% | 70.8% | 74.6% | 81.9 | 85.5 | 88.3 | 1    |

### 2. ag_news

|       | 50    | 100   | 150   | 200   | 250  | 300  | 350  | 400  | 450  | 500  | 500+ |
| ----- | ----- | ----- | ----- | ----- | ---- | ---- | ---- | ---- | ---- | ---- | ---- |
| train | 91.2% | 99.7% | 99.9% | 99.9% | 1    | -    |      |      |      |      | 1    |
| dev   | 91.5% | 99.6% | 99.9% | 1     |      |      |      |      |      |      | 1    |

### 3. sst_2

|       | 50    | 100  | 150  | 200  | 250  | 300  | 350  | 400  | 450  | 500  | 500+ |
| ----- | ----- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- |
| train | 99.9% | 1    | -    | -    |      |      |      |      |      |      | 1    |
| dev   | 1     | -    |      |      |      |      |      |      |      |      | 1    |

### 4. dbpedia

|       | 50    | 100   | 150   | 200   | 250   | 300   | 350   | 400   | 450   | 500   | 500+ |
| ----- | ----- | ----- | ----- | ----- | ----- | ----- | ----- | ----- | ----- | ----- | ---- |
| train | 45.7% | 99.1% | 99.9% | 99.9% | 99.9% | 99.9% | 99.9% | 99.9% | 99.9% | 99.9% | 1    |
| dev   | 45.9% | 99.1% | 99.9% | 99.9% | 99.9% | 99.9% | 99.9% | 99.9% | 99.9% | 99.9% | 1    |

### 5. yelp_review_full

|       | 50    | 100   | 150   | 200   | 250   | 300   | 350   | 400   | 450   | 500   | 500+ |
| ----- | ----- | ----- | ----- | ----- | ----- | ----- | ----- | ----- | ----- | ----- | ---- |
| train | 18.4% | 43.2% | 61.5% | 73.9% | 82.1% | 87.6% | 89.9% | 93.7% | 95.5% | 96.7% | 1    |
| dev   | 18.1% | 43.1% | 61.4% | 73.8% | 82.1% | 87.5% | 90.2% | 93.8% | 95.5% | 96.7% | 1    |

### 6.yelp_review_polarity

|       | 50    | 100   | 150   | 200   | 250   | 300   | 350   | 400   | 450   | 500   | 500+ |
| ----- | ----- | ----- | ----- | ----- | ----- | ----- | ----- | ----- | ----- | ----- | ---- |
| train | 18.4% | 43.2% | 61.5% | 73.9% | 82.1% | 87.6% | 89.9% | 93.7% | 95.5% | 96.7% | 1    |
| dev   | 18.1% | 43.1% | 61.4% | 73.8% | 82.1% | 87.5% | 90.2% | 93.8% | 95.5% | 96.7% | 1    |

### 7. THUCNews

|       | 50    | 100  | 150   | 200   | 250   | 300   | 350   | 400   | 450   | 500   | 500+ |
| ----- | ----- | ---- | ----- | ----- | ----- | ----- | ----- | ----- | ----- | ----- | ---- |
| train | 0.1%  | 5.7% | 10.5% | 14.2% | 18.3% | 22.4% | 25.1% | 30.6% | 34.7% | 38.6% | 1    |
| dev   | 0.15% | 1.6% | 5.1%  | 9.1%  | 14.4% | 19.4% | 24.3% | 30.6% | 36.1% | 41.6% | 1    |

### 8. yahoo_answers

|       | 50    | 100   | 150   | 200   | 250   | 300   | 350   | 400   | 450   | 500   | 500+ |
| ----- | ----- | ----- | ----- | ----- | ----- | ----- | ----- | ----- | ----- | ----- | ---- |
| train | 78.0% | 92.5% | 96.6% | 98.4% | 99.7% | 99.9% | 99.9% | 99.9% | 99.9% | 99.9% | 1    |
| dev   | 77.9% | 92.6% | 96.6% | 98.4% | 99.7% | 99.9% | 99.9% | 99.9% | 99.9% | 99.9% | 1    |

### 1. 长度实验

| 数据集               | 50     | 100    | 150    | 200    | 250    | 300    | 350    | 400    | 450    | 500    |
| -------------------- | ------ | ------ | ------ | ------ | ------ | ------ | ------ | ------ | ------ | ------ |
| imdb                 | 81.572 | 86.792 | 89.828 | 91.176 | 92.148 | 92.808 | 93.280 | 93.672 | 93.772 | 93.996 |
| ag_news              | 94.434 | 94.184 | 94.224 | 94.276 | 94.276 | 94.276 | 94.276 | 94.276 | 94.276 | 94.276 |
| sst_2                | 92.546 | 93.119 | 93.119 | 93.005 | 93.005 | 93.463 | 93.005 | 93.119 | 93.119 | 93.225 |
| dbpedia              | 99.120 | 99.153 | 99.162 | 99.169 | 99.175 | 99.179 | 99.181 | 99.183 | 99.227 | 99.25  |
| yelp_review_full     | 59.596 | 64.414 | 66.358 | 66.769 | 67.463 |        |        |        | 69.457 | 69.976 |
| yelp_review_polarity |        |        |        |        |        |        |        |        |        | 97.763 |
| THUCNews             | 96.1   | 96.520 | 97.06  | 96.79  | 97.06  | 97.26  | 97.20  | 97.23  | 97.29  | 97.35  |
| yahoo_answers        | 75.965 |        |        | 76.332 |        |        |        |        |        | 76.208 |

```
python3 run_ag_news.py --max_seq_length=500 --num_train_epochs=5.0 --do_train --gpu_ids="4 5 6 7" --gradient_accumulation_steps=8 --print_step=100
```

## 融入超长文本

| 模型               | THUCNews |
| ------------------ | -------- |
| Bert + Attention   |          |
| Bert + max_pooling |          |
| Bert + avg_pooling |          |



## 模型试验



```
python3 run_SST2.py --max_seq_length=100 --num_train_epochs=5.0 --do_train --gpu_ids="0" --gradient_accumulation_steps=8 --print_step=50
```

```
python3 run_ag_news.py --max_seq_length=150 --num_train_epochs=5.0 --do_train --gpu_ids="1" --gradient_accumulation_steps=8 --print_step=100
```

```
python3 run_dbpedia.py --max_seq_length=150 --num_train_epochs=5.0 --do_train --gpu_ids="2" --gradient_accumulation_steps=8 --print_step=100
```

```
python3 run_imdb.py --max_seq_length=500 --num_train_epochs=5.0 --do_train --gpu_ids="3" --gradient_accumulation_steps=8 --print_step=100
```

```
python3 run_THUCNews.py --max_seq_length=500 --num_train_epochs=5.0 --do_train --gpu_ids="4" --gradient_accumulation_steps=8 --print_step=100
```

```
python3 run_yelp_review_polarity.py --max_seq_length=500 --num_train_epochs=5.0 --do_train --gpu_ids="5" --gradient_accumulation_steps=8 --print_step=100
```





|                  | imdb   | ag_news | sst2   | dbpedia | yelp_review_full | yelp_review_polarity | THUCNews | yahoo_answers |
| ---------------- | ------ | ------- | ------ | ------- | ---------------- | -------------------- | -------- | ------------- |
| BERT             | 93.996 | 94.276  | 93.225 | 99.250  | 69.976           | 97.763               | 97.35    | 76.208        |
| Bert + TextCNN   |        |         |        |         |                  |                      |          |               |
| BERT + LSTM      |        |         |        |         |                  |                      |          |               |
| BERT + RCNN      |        |         |        |         |                  |                      |          |               |
| BERT + Attention |        |         |        |         |                  |                      |          |               |
| BERT + DPCNN     |        |         |        |         |                  |                      |          |               |
| BERT + VDCN      |        |         |        |         |                  |                      |          |               |



